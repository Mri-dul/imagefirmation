<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #e6e6e6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(10, 15, 30, 0.85);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(15, 23, 42, 0.9);
            border-bottom: 2px solid #4cc9f0;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #4cc9f0, #4361ee, #3a0ca3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #a3b3cc;
            max-width: 600px;
            margin: 0 auto;
        }

        .app-container {
            display: flex;
            flex-wrap: wrap;
            padding: 30px;
            gap: 30px;
        }

        .input-section, .output-section {
            flex: 1;
            min-width: 300px;
            background: rgba(20, 25, 45, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: #4cc9f0;
            padding-bottom: 10px;
            border-bottom: 2px solid #3a0ca3;
        }

        .section-title i {
            font-size: 1.8rem;
        }

        .input-description {
            margin-bottom: 20px;
            line-height: 1.6;
            color: #b8c1d9;
        }

        textarea {
            width: 100%;
            height: 300px;
            background: rgba(10, 15, 30, 0.9);
            border: 2px solid #4361ee;
            border-radius: 12px;
            padding: 20px;
            color: #e6e6e6;
            font-family: monospace;
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 0 3px rgba(76, 201, 240, 0.3);
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 25px 0;
        }

        button {
            padding: 14px 25px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            color: white;
            flex: 1;
        }

        .btn-secondary {
            background: rgba(67, 97, 238, 0.2);
            color: #a3b3cc;
            border: 1px solid #4361ee;
            flex: 1;
        }

        .btn-tertiary {
            background: rgba(100, 100, 100, 0.2);
            color: #ddd;
            border: 1px solid #666;
            flex: 1;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #3a56e4, #2f0a8a);
        }

        .btn-secondary:hover {
            background: rgba(67, 97, 238, 0.3);
        }

        .btn-tertiary:hover {
            background: rgba(100, 100, 100, 0.3);
        }

        .image-container {
            background: rgba(10, 15, 30, 0.9);
            border-radius: 12px;
            min-height: 350px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border: 2px solid #4361ee;
            position: relative;
        }

        canvas {
            max-width: 100%;
            max-height: 100%;
            display: block;
            background: #ffffff;
        }

        .placeholder {
            text-align: center;
            padding: 20px;
            color: #5d6b8c;
        }

        .placeholder i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #4361ee;
        }

        .placeholder p {
            font-size: 1.1rem;
            margin-top: 10px;
        }

        .info-box {
            margin-top: 25px;
            padding: 20px;
            background: rgba(15, 23, 42, 0.7);
            border-radius: 12px;
            border: 1px solid #3a0ca3;
        }

        .info-title {
            color: #4cc9f0;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .json-example {
            background: rgba(10, 15, 30, 0.9);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            overflow-x: auto;
            font-family: monospace;
            color: #a3b3cc;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid #3a0ca3;
        }

        .dimensions {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .dimension-input {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #a3b3cc;
            font-weight: 500;
        }

        input {
            width: 100%;
            padding: 12px;
            background: rgba(10, 15, 30, 0.9);
            border: 2px solid #4361ee;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        input:focus {
            outline: none;
            border-color: #4cc9f0;
        }

        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            display: none;
            font-weight: 500;
        }

        .success {
            background: rgba(40, 167, 69, 0.15);
            border: 1px solid rgba(40, 167, 69, 0.5);
            color: #28a745;
        }

        .error {
            background: rgba(220, 53, 69, 0.15);
            border: 1px solid rgba(220, 53, 69, 0.5);
            color: #dc3545;
        }

        .format-info {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .format-tag {
            background: rgba(76, 201, 240, 0.2);
            border: 1px solid #4cc9f0;
            border-radius: 20px;
            padding: 5px 15px;
            font-size: 0.9rem;
        }

        footer {
            text-align: center;
            padding: 25px;
            background: rgba(15, 23, 42, 0.9);
            border-top: 2px solid #3a0ca3;
            color: #5d6b8c;
            font-size: 0.95rem;
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-palette"></i> Pixel Art Generator</h1>
            <p class="subtitle">Create images from JSON data with pixel coordinates and color values</p>
        </header>
        
        <div class="app-container">
            <div class="input-section">
                <h2 class="section-title"><i class="fas fa-code"></i> JSON Input</h2>
                <div class="input-description">
                    <p>Enter JSON data with pixel positions and color values. Each pixel should have:</p>
                    <ul style="margin: 10px 0 10px 25px;">
                        <li><code>x</code> - horizontal position</li>
                        <li><code>y</code> - vertical position</li>
                        <li><code>color</code> - RGB array [R, G, B] <span class="format-tag">RGB Format</span></li>
                        <li><strong>OR</strong></li>
                        <li><code>gray</code> - Grayscale value (0-255) <span class="format-tag">Grayscale Format</span></li>
                    </ul>
                </div>
                
                <div class="dimensions">
                    <div class="dimension-input">
                        <label for="width-input"><i class="fas fa-arrows-alt-h"></i> Canvas Width</label>
                        <input type="number" id="width-input" min="1" value="16">
                    </div>
                    <div class="dimension-input">
                        <label for="height-input"><i class="fas fa-arrows-alt-v"></i> Canvas Height</label>
                        <input type="number" id="height-input" min="1" value="16">
                    </div>
                </div>
                
                <textarea id="json-input">{
  "pixels": [
    {"x": 0, "y": 0, "color": [255, 0, 0]},
    {"x": 1, "y": 0, "color": [0, 255, 0]},
    {"x": 2, "y": 0, "color": [0, 0, 255]},
    {"x": 3, "y": 0, "color": [255, 255, 255]},
    
    {"x": 0, "y": 1, "color": [255, 165, 0]},
    {"x": 1, "y": 1, "color": [128, 0, 128]},
    {"x": 2, "y": 1, "color": [255, 192, 203]},
    {"x": 3, "y": 1, "color": [0, 128, 0]},
    
    {"x": 0, "y": 2, "color": [0, 0, 0]},
    {"x": 1, "y": 2, "color": [128, 128, 128]},
    {"x": 2, "y": 2, "color": [255, 255, 0]},
    {"x": 3, "y": 2, "color": [0, 255, 255]},
    
    {"x": 0, "y": 3, "color": [139, 69, 19]},
    {"x": 1, "y": 3, "color": [75, 0, 130]},
    {"x": 2, "y": 3, "color": [240, 230, 140]},
    {"x": 3, "y": 3, "color": [32, 178, 170]}
  ]
}</textarea>
                
                <div class="controls">
                    <button id="generate-btn" class="btn-primary">
                        <i class="fas fa-magic"></i> Generate Image
                    </button>
                    <button id="rgb-example-btn" class="btn-secondary">
                        <i class="fas fa-paint-brush"></i> RGB Example
                    </button>
                    <button id="grayscale-example-btn" class="btn-tertiary">
                        <i class="fas fa-moon"></i> Grayscale Example
                    </button>
                    <button id="clear-btn" class="btn-secondary">
                        <i class="fas fa-broom"></i> Clear
                    </button>
                </div>
                
                <div id="status" class="status"></div>
                
                <div class="info-box">
                    <h3 class="info-title"><i class="fas fa-info-circle"></i> Supported Formats</h3>
                    <div class="format-info">
                        <span class="format-tag">RGB: {"x":0, "y":0, "color": [255, 0, 0]}</span>
                        <span class="format-tag">Grayscale: {"x":0, "y":0, "gray": 128}</span>
                    </div>
                    
                    <div class="json-example">
                        <h4>RGB Example:</h4>
                        <pre>{
  "pixels": [
    {"x":0, "y":0, "color": [255, 0, 0]},
    {"x":1, "y":0, "color": [0, 255, 0]},
    // ...
  ]
}</pre>
                        
                        <h4>Grayscale Example:</h4>
                        <pre>{
  "pixels": [
    {"x":0, "y":0, "gray": 78},
    {"x":1, "y":0, "gray": 85},
    // ...
  ]
}</pre>
                    </div>
                </div>
            </div>
            
            <div class="output-section">
                <h2 class="section-title"><i class="fas fa-image"></i> Generated Pixel Art</h2>
                <div class="image-container">
                    <canvas id="pixel-canvas"></canvas>
                    <div id="placeholder" class="placeholder">
                        <i class="fas fa-image"></i>
                        <p>Your pixel art will appear here</p>
                        <p>Enter JSON and click "Generate Image"</p>
                    </div>
                </div>
                
                <div class="controls">
                    <button id="download-btn" class="btn-primary">
                        <i class="fas fa-download"></i> Download Image
                    </button>
                    <button id="zoom-in" class="btn-secondary">
                        <i class="fas fa-search-plus"></i> Zoom In
                    </button>
                    <button id="zoom-out" class="btn-secondary">
                        <i class="fas fa-search-minus"></i> Zoom Out
                    </button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Pixel Art Generator | Create images from JSON pixel data | Works entirely in your browser</p>
            <p>No data is uploaded to any server - your images stay private</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const jsonInput = document.getElementById('json-input');
            const generateBtn = document.getElementById('generate-btn');
            const rgbExampleBtn = document.getElementById('rgb-example-btn');
            const grayscaleExampleBtn = document.getElementById('grayscale-example-btn');
            const clearBtn = document.getElementById('clear-btn');
            const downloadBtn = document.getElementById('download-btn');
            const zoomInBtn = document.getElementById('zoom-in');
            const zoomOutBtn = document.getElementById('zoom-out');
            const canvas = document.getElementById('pixel-canvas');
            const placeholder = document.getElementById('placeholder');
            const statusDiv = document.getElementById('status');
            const widthInput = document.getElementById('width-input');
            const heightInput = document.getElementById('height-input');
            const ctx = canvas.getContext('2d');
            
            let pixelSize = 20; // Default pixel size for zoom
            let pixelData = [];
            
            // Example JSON data (RGB)
            const rgbExampleData = {
                pixels: [
                    {x: 0, y: 0, color: [255, 0, 0]},
                    {x: 1, y: 0, color: [0, 255, 0]},
                    {x: 2, y: 0, color: [0, 0, 255]},
                    {x: 3, y: 0, color: [255, 255, 255]},
                    {x: 0, y: 1, color: [255, 165, 0]},
                    {x: 1, y: 1, color: [128, 0, 128]},
                    {x: 2, y: 1, color: [255, 192, 203]},
                    {x: 3, y: 1, color: [0, 128, 0]},
                    {x: 0, y: 2, color: [0, 0, 0]},
                    {x: 1, y: 2, color: [128, 128, 128]},
                    {x: 2, y: 2, color: [255, 255, 0]},
                    {x: 3, y: 2, color: [0, 255, 255]},
                    {x: 0, y: 3, color: [139, 69, 19]},
                    {x: 1, y: 3, color: [75, 0, 130]},
                    {x: 2, y: 3, color: [240, 230, 140]},
                    {x: 3, y: 3, color: [32, 178, 170]}
                ]
            };
            
            // Example JSON data (Grayscale)
            const grayscaleExampleData = {
                pixels: [
                    {x: 0, y: 0, gray: 0},
                    {x: 1, y: 0, gray: 32},
                    {x: 2, y: 0, gray: 64},
                    {x: 3, y: 0, gray: 96},
                    {x: 4, y: 0, gray: 128},
                    {x: 5, y: 0, gray: 160},
                    {x: 6, y: 0, gray: 192},
                    {x: 7, y: 0, gray: 224},
                    {x: 8, y: 0, gray: 255},
                    
                    {x: 0, y: 1, gray: 255},
                    {x: 1, y: 1, gray: 224},
                    {x: 2, y: 1, gray: 192},
                    {x: 3, y: 1, gray: 160},
                    {x: 4, y: 1, gray: 128},
                    {x: 5, y: 1, gray: 96},
                    {x: 6, y: 1, gray: 64},
                    {x: 7, y: 1, gray: 32},
                    {x: 8, y: 1, gray: 0},
                    
                    {x: 0, y: 2, gray: 50},
                    {x: 1, y: 2, gray: 75},
                    {x: 2, y: 2, gray: 100},
                    {x: 3, y: 2, gray: 125},
                    {x: 4, y: 2, gray: 150},
                    {x: 5, y: 2, gray: 175},
                    {x: 6, y: 2, gray: 200},
                    {x: 7, y: 2, gray: 225},
                    {x: 8, y: 2, gray: 255},
                    
                    {x: 0, y: 3, gray: 255},
                    {x: 1, y: 3, gray: 225},
                    {x: 2, y: 3, gray: 200},
                    {x: 3, y: 3, gray: 175},
                    {x: 4, y: 3, gray: 150},
                    {x: 5, y: 3, gray: 125},
                    {x: 6, y: 3, gray: 100},
                    {x: 7, y: 3, gray: 75},
                    {x: 8, y: 3, gray: 50}
                ]
            };
            
            // Load RGB example data
            rgbExampleBtn.addEventListener('click', function() {
                jsonInput.value = JSON.stringify(rgbExampleData, null, 2);
                widthInput.value = 4;
                heightInput.value = 4;
                generatePixelArt();
            });
            
            // Load grayscale example data
            grayscaleExampleBtn.addEventListener('click', function() {
                jsonInput.value = JSON.stringify(grayscaleExampleData, null, 2);
                widthInput.value = 9;
                heightInput.value = 4;
                generatePixelArt();
            });
            
            // Clear input
            clearBtn.addEventListener('click', function() {
                jsonInput.value = '';
                clearCanvas();
            });
            
            // Generate pixel art
            generateBtn.addEventListener('click', generatePixelArt);
            
            // Download image
            downloadBtn.addEventListener('click', function() {
                if (canvas.width === 0) {
                    showStatus('Please generate an image first', 'error');
                    return;
                }
                
                const link = document.createElement('a');
                link.download = 'pixel-art.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
            
            // Zoom functionality
            zoomInBtn.addEventListener('click', function() {
                if (pixelSize < 50) {
                    pixelSize += 5;
                    renderPixels();
                }
            });
            
            zoomOutBtn.addEventListener('click', function() {
                if (pixelSize > 5) {
                    pixelSize -= 5;
                    renderPixels();
                }
            });
            
            // Generate pixel art function
            function generatePixelArt() {
                try {
                    const inputText = jsonInput.value.trim();
                    
                    if (!inputText) {
                        showStatus('Please enter JSON data', 'error');
                        return;
                    }
                    
                    // Parse the JSON input
                    const jsonData = JSON.parse(inputText);
                    
                    // Validate JSON structure
                    if (!jsonData.pixels || !Array.isArray(jsonData.pixels)) {
                        throw new Error('Invalid JSON structure. Must contain a "pixels" array.');
                    }
                    
                    // Store pixel data
                    pixelData = jsonData.pixels;
                    
                    // Get dimensions
                    const width = parseInt(widthInput.value) || 16;
                    const height = parseInt(heightInput.value) || 16;
                    
                    // Validate dimensions
                    if (width <= 0 || height <= 0) {
                        throw new Error('Width and height must be positive values.');
                    }
                    
                    // Set canvas dimensions
                    canvas.width = width * pixelSize;
                    canvas.height = height * pixelSize;
                    
                    // Render pixels
                    renderPixels();
                    
                    // Hide placeholder, show canvas
                    placeholder.style.display = 'none';
                    
                    showStatus(`Successfully generated ${width}x${height} pixel art`, 'success');
                    
                } catch (error) {
                    showStatus(`Error: ${error.message}`, 'error');
                    console.error('Error generating pixel art:', error);
                }
            }
            
            // Render pixels on canvas
            function renderPixels() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Get dimensions
                const width = parseInt(widthInput.value) || 150;
                const height = parseInt(heightInput.value) || 100;
                
                // Set canvas dimensions based on zoom
                canvas.width = width * pixelSize;
                canvas.height = height * pixelSize;
                
                // Draw white background
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw grid lines (light gray)
                ctx.strokeStyle = '#e0e0e0';
                ctx.lineWidth = 1;
                
                for (let x = 0; x <= width; x++) {
                    ctx.beginPath();
                    ctx.moveTo(x * pixelSize, 0);
                    ctx.lineTo(x * pixelSize, canvas.height);
                    ctx.stroke();
                }
                
                for (let y = 0; y <= height; y++) {
                    ctx.beginPath();
                    ctx.moveTo(0, y * pixelSize);
                    ctx.lineTo(canvas.width, y * pixelSize);
                    ctx.stroke();
                }
                
                // Draw pixels
                pixelData.forEach(pixel => {
                    const x = pixel.x;
                    const y = pixel.y;
                    
                    let r, g, b;
                    
                    // Handle RGB format
                    if (pixel.color && Array.isArray(pixel.color) && pixel.color.length >= 3) {
                        r = clamp(pixel.color[0], 0, 255);
                        g = clamp(pixel.color[1], 0, 255);
                        b = clamp(pixel.color[2], 0, 255);
                    } 
                    // Handle grayscale format
                    else if (typeof pixel.gray !== 'undefined') {
                        const grayValue = clamp(pixel.gray, 0, 255);
                        r = g = b = grayValue;
                    }
                    // Invalid format
                    else {
                        return; // Skip invalid pixels
                    }
                    
                    if (x >= 0 && x < width && y >= 0 && y < height) {
                        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
                        ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
                    }
                });
            }
            
            // Clear canvas
            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                canvas.width = 0;
                canvas.height = 0;
                placeholder.style.display = 'flex';
                statusDiv.style.display = 'none';
            }
            
            // Show status message
            function showStatus(message, type) {
                statusDiv.textContent = message;
                statusDiv.className = `status ${type}`;
                statusDiv.style.display = 'block';
                
                // Auto-hide success messages after 5 seconds
                if (type === 'success') {
                    setTimeout(() => {
                        statusDiv.style.display = 'none';
                    }, 5000);
                }
            }
            
            // Clamp value between min and max
            function clamp(value, min, max) {
                return Math.min(Math.max(value, min), max);
            }
            
            // Initialize with RGB example data
            jsonInput.value = JSON.stringify(rgbExampleData, null, 2);
        });
    </script>
</body>
</html>